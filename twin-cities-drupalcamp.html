<!--
Google IO 2012/2013 HTML5 Slide Template

Authors: Eric Bidelman <ebidel@gmail.com>
         Luke Mahé <lukem@google.com>

URL: https://code.google.com/p/io-2012-slides
-->
<!DOCTYPE html>
<html>
<head>
  <title></title>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="chrome=1">
  <!--<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0">-->
  <!--<meta name="viewport" content="width=device-width, initial-scale=1.0">-->
  <!--This one seems to work all the time, but really small on ipad-->
  <!--<meta name="viewport" content="initial-scale=0.4">-->
  <meta name="apple-mobile-web-app-capable" content="yes">
  <link rel="stylesheet" media="all" href="theme/css/default.palantir.css">
  <link rel="stylesheet" media="only screen and (max-device-width: 480px)" href="theme/css/phone.css">
  <base target="_blank"> <!-- This amazingness opens all links in a new tab. -->
  <script data-main="js/slides-twincities2013" src="js/require-1.0.8.min.js"></script>
</head>
<body style="opacity: 0">

<slides class="layout-widescreen">

  <slide class="title-slide segue nobackground">
    <aside class="gdbar"><img src="images/palantir-branding/palantir_logo.png"></aside>
    <!-- The content of this hgroup is replaced programmatically through the slide_config.json. -->
    <hgroup class="auto-fadein">
      <h1 data-config-title><!-- populated from slide_config.json --></h1>
      <h2 data-config-subtitle><!-- populated from slide_config.json --></h2>
      <p data-config-presenter><!-- populated from slide_config.json --></p>
    </hgroup>
  </slide>

  <slide>
    <hgroup>
      <h2>Steve Persch</h2>
    </hgroup>
    <article class="zen-container zen-two-col">
      <div>
      <img src="images/ctools/steve_persch.jpg" alt="Steve Persch" title="Steve Persch" />
      </div>
      <div>
      <ul>
        <li>@stevector on <a href="http://drupal.org/user/179805">Drupal.org</a>, <a href="http://twitter.com/stevector">Twitter</a> and <a href="https://github.com/stevector">Github</a></li>
        <li>Senior Engineer at <a href="http://palantir.net">Palantir.net</a></li>
      </ul>
      <p>Our mission at Palantir is to empower and enable people everywhere to share information through highly functional websites and interactive software.</p>
      </div>
    </article>
  </slide>

  <slide>
    <hgroup>
      <h2>uofmhealth.org</h2>
    </hgroup>
    <article>
      <img src="images/palantir-branding/sample-projects/uofmhealth.png" alt="" title="" />
    </article>
  </slide>

  <slide>
    <hgroup>
      <h2>Marketplace Radio</h2>
    </hgroup>
    <article>
      <img src="images/palantir-branding/sample-projects/marketplace-home.jpg" alt="Marketplace.org homepage" title="Interlochen.org on different devices" />
    </article>
  </slide>

  <slide>
    <hgroup>
      <h2>Interlochen Center for the Arts</h2>
    </hgroup>
    <article>
      <img src="images/palantir-branding/sample-projects/interlochen-RWD.jpg" alt="Screenshot of Interlochen.org on different devices" title="Interlochen.org on different devices" />
    </article>
  </slide>

  <slide class="haiku branding-background-views">
    <hgroup class="auto-fadein">
      <h2>What's a haiku?</h2>
    </hgroup>
    <article class="centered flexbox vleft auto-fadein">
      <q>
        Describe an idea. <br/>
        Five, seven, five syllables. <br/>
        End it with a twist.
      </q>
    </article>
  </slide>

  <slide class="haiku">
    <hgroup>
      <h2>Drupal Haikus</h2>
    </hgroup>
    <article class="centered flexbox vleft auto-fadein">
      <q>
      Hello D6 site! <br>
      Are your modules up to date? <br>
      … I’ll need some coffee.
      </q>
      <footer class="source"><a href="https://twitter.com/DrupalHaikus/status/246107066828206081">Twitter</a></footer>
    </article>
  </slide>

  <slide class="haiku branding-background-shenanigans">
    <hgroup>
      <h2>Drupal Haikus</h2>
    </hgroup>
    <article class="centered flexbox vleft auto-fadein">
      <q>
        drupal_execute(), <br>
        the only hammer you need. <br>
        Where’d these screws come from?
      </q>
      <footer class="source"><a href="https://twitter.com/DrupalHaikus/status/252788224198578178">Twitter</a></footer>
    </article>
  </slide>

  <slide class="haiku">
    <hgroup>
      <h2>Drupal Haikus</h2>
    </hgroup>
    <article class="centered flexbox vleft auto-fadein">
      <q>
div class class div class <br/>
div span words close span close div <br/>
close div close div sigh
      </q>
      <footer class="source"><a href="https://twitter.com/DrupalHaikus/status/235000347037421568">Twitter</a></footer>
    </article>
  </slide>

  <slide class="haiku">
    <hgroup class="auto-fadein">
      <h2>What's a plugin?</h2>
    </hgroup>
    <article class="centered flexbox vleft auto-fadein">
      <q>
        Plugins are units <br/>
        of behavior that might need <br/>
        configuration.
      </q>
    </article>
  </slide>

  <slide>
    <hgroup>
      <h2>Node actions</h2>
    </hgroup>
    <article>
      <img src="images/panels/d7actions.png" alt="" title="" />
    </article>
  </slide>

  <slide class="has-iframe">
    <hgroup>
      <h2>An example from core</h2>
      <h3>Actions in D7</h3>
    </hgroup>
    <article>
      <iframe class="full-frame" src="http://drupalcode.org/project/drupal.git/blob/66bc8fb393d4bf2ff0230c80350143bd186a1d51:/modules/node/node.module#l3763">
      </iframe>
      <footer class="source"><a href="http://drupalcode.org/project/drupal.git/blob/66bc8fb393d4bf2ff0230c80350143bd186a1d51:/modules/node/node.module#l3763">modules/node/node.module</a></footer>
    </article>
  </slide>

  <slide class="has-iframe">
    <hgroup>
      <h2>An example from core</h2>
      <h3>The "Promote" action in D8</h3>
    </hgroup>
    <article>
      <iframe class="full-frame" src="http://drupalcode.org/project/drupal.git/blob/d8e21f879c652b027dcdf3fbcc70608ae2595bd7:/core/modules/node/lib/Drupal/node/Plugin/Action/PromoteNode.php">
      </iframe>
      <footer class="source"><a href="http://drupalcode.org/project/drupal.git/blob/d8e21f879c652b027dcdf3fbcc70608ae2595bd7:/core/modules/node/lib/Drupal/node/Plugin/Action/PromoteNode.php">PromoteNode.php</a></footer>
    </article>
  </slide>

  <slide class="haiku">
    <hgroup class="auto-fadein">
      <h2>What's a plugin?</h2>
    </hgroup>
    <article class="centered flexbox vleft auto-fadein">
      <q>
        Plugins add discrete <br/>
        abilities to your site. <br/>
        Assembly required.
      </q>
    </article>
  </slide>

  <slide class="has-iframe">
    <hgroup>
      <h2>Another core example</h2>
      <h3>Blocks in D7</h3>
    </hgroup>
    <article>
      <p class="iframe-link">iframe link: <a href="http://drupalcode.org/project/drupal.git/blob/66bc8fb393d4bf2ff0230c80350143bd186a1d51:/modules/system/system.module#l2032">modules/system/system.module</a></p>
      <iframe class="full-frame" src="http://drupalcode.org/project/drupal.git/blob/66bc8fb393d4bf2ff0230c80350143bd186a1d51:/modules/system/system.module#l2032">
      </iframe>
    </article>
  </slide>


  <slide class="has-iframe">
    <hgroup>
      <h2>Another core example</h2>
      <h3>Blocks in D8</h3>
    </hgroup>
    <article>
      <p class="iframe-link">iframe link: <a href="http://drupalcode.org/project/drupal.git/blob/d8e21f879c652b027dcdf3fbcc70608ae2595bd7:/core/modules/system/lib/Drupal/system/Plugin/Block/SystemPoweredByBlock.php">SystemPoweredByBlock.php</a></p>
      <iframe class="full-frame" src="http://drupalcode.org/project/drupal.git/blob/d8e21f879c652b027dcdf3fbcc70608ae2595bd7:/core/modules/system/lib/Drupal/system/Plugin/Block/SystemPoweredByBlock.php#l14">
      </iframe>
    </article>
  </slide>


  <slide class="nobackground">
    <hgroup>
      <h2>Obligatory shout-out to Earl Miles</h2>
      <h3><a href="http://drupal.org/user/26979">merlinofchaos</a> on Drupal.org</h3>
    </hgroup>
    <article class="zen-container zen-two-col">
      <div>
      <img src="images/ctools/drupalcon-sunnyvale-2007-earl-miles.jpg" alt="Earl Miles" title="Earl Miles" />
      </div>
      <div>
        <ul>
          <li>Views</li>
          <li>CTools</li>
          <li>Panels</li>
          <li>Panels Everywhere</li>
          <li>Panelizer</li>
          <li>Nodequeue</li>
          <li>Advanced Help</li>
        </ul>
      </div>
      <footer class="source"><a href="http://buytaert.net/album/drupalcon-sunnyvale-2007/earl-miles">http://buytaert.net/album/drupalcon-sunnyvale-2007/earl-miles</a></footer>
    </article>
  </slide>

  <slide class="nobackground">
    <hgroup>
      <h2>What is CTools?</h2>
      <h3>Acronym for Chaos Tools</h3>
    </hgroup>
    <article class="definition">
      <p>This suite is primarily a set of APIs and tools to improve the developer experience. All these enhancements have grown <b>far more than just Panels</b> and some of them have been or are being included in Drupal Core.</p>
    <footer class="source">
      <a href="http://drupal.org/project/ctools">CTools project page</a>
    </footer>
    </article>
  </slide>

  <slide>
    <hgroup>
      <h2>D8 Plugin System Deep Dive session</h2>
      <h3>First of many reminders in this presentation</h3>
    </hgroup>
    <article>
      <p>
        <a href="http://portland2013.drupal.org/node/2458">
          From Drupalcon Portland 2013
        </a><br>
      </p>
      <iframe width="420" height="315" src="http://www.youtube.com/embed/T5y3dJYHb_A" frameborder="0" allowfullscreen></iframe>
    </article>
  </slide>

  <slide class="haiku">
    <hgroup>
      <h2>Panels</h2>
    </hgroup>
    <article class="centered flexbox vleft auto-fadein">
      <q>
        Control your layout <br/>
        With in-browser editing. <br/>
        Drupal 8’s White Whale.
      </q>
    </article>
  </slide>

  <slide>
    <hgroup>
      <h2>In-browser layout editing</h2>
    </hgroup>
    <article>
      <img src="images/panels/content-types-in-a-layout.png" alt="" title="" />
    </article>
  </slide>

  <slide>
    <hgroup>
      <h2>Control the layout of Article nodes</h2>
      <h3>Put an author name and picture in the sidebar.</h3>
    </hgroup>
    <article>
       <img src="images/panels/panels-end-result.png" alt="Panels end result" title="Panels end result" />
    </article>
  </slide>

  <slide>
    <hgroup>
      <h2>Panels starts with a complex screen</h2>
    </hgroup>
    <article>
      <img src="images/panels/panels-overview.png" alt="Node page config" title="Node page config" />
    </article>
  </slide>

  <slide>
    <hgroup>
      <h2>Set conditions for selecting the variant</h2>
    </hgroup>
    <article>
      <img src="images/panels/access-plugin-article.png" alt="Access plugin screen" title="Access plugin screen" />
    </article>
  </slide>

  <slide>
    <hgroup>
      <h2>Add more contexts</h2>
    </hgroup>
    <article>
      <img src="images/panels/contexts.png" alt="Contexts screen" title="Contexts screen" />
    </article>
  </slide>

  <slide>
    <hgroup>
      <h2>Pick a Layout</h2>
    </hgroup>
    <article>
      <img src="images/panels/layouts.png" alt="" title="" />
    </article>
  </slide>

  <slide>
    <hgroup>
      <h2>Put stuff in the layout</h2>
    </hgroup>
    <article>
      <img src="images/panels/content-types-in-a-layout.png" alt="" title="" />
    </article>
  </slide>

  <slide>
    <hgroup>
      <h2>Did it work?</h2>
    </hgroup>
    <article>
       <img src="images/panels/panels-end-result--did-it-work.png" alt="Panels end result" title="Panels end result" />
    </article>
  </slide>

  <slide>
    <hgroup>
      <h2>If it didn't work...</h2>

    </hgroup>
    <article>
      <ul>
        <li>Try Googling the problem</li>
        <li>Maybe StackExchange knows</li>
        <li>Drupal.org issue queue</li>
        <li>Read Documentation</li>
        <li>Ask a co-worker</li>
        <li>Ask IRC</li>
        <li><b>Look at the code</b></li>
      </ul>
    </article>
  </slide>

  <slide>
    <hgroup>
      <h2>Once the code is open you could...</h2>
    </hgroup>
    <article>
      <ul>
        <li>dsm()/dpm anywhere/everywhere</li>
        <li>Check for clues in template files</li>
        <li>Use an IDE's debugger</li>
        <li><b>Go straight for the plugin file</b></li>
      </ul>
    </article>
  </slide>

  <slide>
    <hgroup>
      <h2>Finding the file</h2>
    </hgroup>
    <article class="zen-container zen-two-col">
      <div>
        <img src="images/panels/plugin-files-directory.png" alt="" title="" />
      </div>
      <div>
        <img src="images/panels/access-files-directory.png" alt="" title="" />
      </div>
    </article>
  </slide>

  <slide>
    <hgroup>
      <h2>Maybe the access plugin is not working</h2>
    </hgroup>
    <article>
      <img src="images/panels/access-plugin-article.png" alt="Access plugin screen" title="Access plugin screen" />
    </article>
  </slide>

  <slide class="haiku">
    <hgroup>
      <h2>Access Plugins</h2>
    </hgroup>
    <article class="centered flexbox vleft auto-fadein">
      <q>
        Give it a context<br/>
        And some configuration.<br/>
        Get back TRUE or FALSE.
      </q>
    </article>
  </slide>

  <slide>
    <hgroup>
      <h2>Access Plugins</h2>
      <h3>Return TRUE or FALSE</h3>
    </hgroup>
    <article>
      <pre class="prettyprint" data-lang="php">
function _simplified_ctools_node_type_ctools_access_check($conf, $context) {
  $node = $context->data;
  if (array_key_exists($node->type, $conf['type'])) {
    return TRUE;
  }
  else {
    return FALSE;
  }
}
      </pre>
      <footer class="source">Real version at: <a href="http://drupalcode.org/project/ctools.git/blob/9d092ccef990c50b19391a3170eca75e1424737e:/plugins/access/node_type.inc#l53">plugins/access/node_type.inc</a></footer>
    </article>
  </slide>

  <slide class="haiku branding-background-robots">
      <hgroup>
      <h2>Debugging plugins</h2>
    </hgroup>
    <article class="centered flexbox vleft auto-fadein">
      <q>
        The plugin exists<br/>
        to implement one function.<br/>
        Debug in there first.
      </q>
    </article>
  </slide>

  <slide>
    <hgroup>
      <h2>Functions in the node_type access plugin</h2>
    </hgroup>
    <article>

      <pre class="prettyprint" data-lang="php">
ctools_node_type_ctools_access_settings($form, &$form_state, $conf);
ctools_node_type_ctools_access_settings_submit($form, &$form_state);
<b>ctools_node_type_ctools_access_check($conf, $context);</b>
ctools_node_type_ctools_access_restrictions($conf, &$context);
ctools_node_type_ctools_access_summary($conf, $context);
      </pre>
      <footer class="source">Real code at: <a href="http://drupalcode.org/project/ctools.git/blob/9d092ccef990c50b19391a3170eca75e1424737e:/plugins/access/node_type.inc#l53">plugins/access/node_type.inc</a></footer>
    </article>
  </slide>

  <slide class="has-iframe">
    <hgroup>
      <h2>The full plugin file</h2>
      <h3></h3>
    </hgroup>
    <article>
      <p class="iframe-link">iframe link: <a href="http://drupalcode.org/project/ctools.git/blob/9d092ccef990c50b19391a3170eca75e1424737e:/plugins/access/node_type.inc#l53">plugins/access/node_type.inc</a></p>
      <iframe class="full-frame" src="http://drupalcode.org/project/ctools.git/blob/9d092ccef990c50b19391a3170eca75e1424737e:/plugins/access/node_type.inc#l53">plugins/access/node_type.inc">
      </iframe>
    </article>
  </slide>

  <slide>
    <hgroup>
      <h2>Wait, what's a context?</h2>
    </hgroup>
    <article>
      <img src="images/panels/contexts.png" alt="Contexts screen" title="Contexts screen" />
    </article>
  </slide>

  <slide class="haiku">
    <hgroup>
      <h2>Context Plugins</h2>
    </hgroup>
    <article class="centered flexbox vleft auto-fadein">
      <q>
        With standard classes,<br/>
        we don’t know an object’s type.<br/>
        Wrap and label it.
      </q>
    </article>
  </slide>

  <slide>
    <hgroup>
      <h2>Context Plugin code</h2>
    </hgroup>
    <article>
      <pre class="prettyprint">
function _simplified_ctools_context_create_node($empty, $data = NULL, $conf = FALSE) {

  $nid = $data['nid'];
  <b>$node = node_load($nid);</b>

  <b>$context = new ctools_context('node');</b>
  $context->plugin = 'node';
  <b>$context->data     = $node;</b>
  $context->title    = $node->title;
  $context->argument = $node->nid;
  $context->restrictions['type'] = array($node->type);

  return $context;
}
      </pre>
      <footer class="source">Real code at: <a href="http://drupalcode.org/project/ctools.git/blob/refs/heads/7.x-1.x:/plugins/contexts/node.inc#l38">plugins/contexts/node.inc</a></footer>
    </article>
  </slide>

  <slide>
    <hgroup>
      <h2>Second Reminder</h2>
      <h3>D8 Plugin System Deep Dive session</h3>
    </hgroup>
    <article>
      <p>
        <a href="http://portland2013.drupal.org/node/2458">
          From Drupalcon Portland 2013
        </a><br>
      </p>
      <iframe width="420" height="315" src="http://www.youtube.com/embed/T5y3dJYHb_A" frameborder="0" allowfullscreen></iframe>
    </article>
  </slide>

  <slide>
    <hgroup>
      <h2>Relationship Plugins</h2>
    </hgroup>
    <article>
      <img src="images/panels/contexts.png" alt="Contexts screen" title="Contexts screen" />
    </article>
  </slide>

  <slide class="haiku branding-background-friends">
    <hgroup>
      <h2>Relationship Plugins</h2>
    </hgroup>
    <article class="centered flexbox vleft auto-fadein">
      <q>
        Pass in a context,<br/>
        and get another context.<br/>
        It is that simple.
      </q>
    </article>
  </slide>

  <slide>
    <hgroup>
      <h2>Node to Author relationship</h2>
    </hgroup>
    <article>
      <pre class="prettyprint" data-lang="php">
function _simplified_ctools_user_from_node_context($context, $conf) {
  $node = $context->data;
  $uid = $node->uid;
  $account = user_load($uid);
  return ctools_context_create('user', $account);
}
      </pre>
      <footer class="source">Real code at: <a href="http://drupalcode.org/project/ctools.git/blob/9d092ccef990c50b19391a3170eca75e1424737e:/plugins/relationships/user_from_node.inc#l24">plugins/relationships/user_from_node.inc</a></footer>
    </article>
  </slide>

  <slide>
    <hgroup>
      <h2>Layout plugins</h2>
    </hgroup>
    <article>
      <div>
      <img src="images/panels/layouts.png" alt="" title="" />
      </div>
    </article>
  </slide>


  <slide class="haiku branding-background-responsive">
      <hgroup>
      <h2>Layout plugins</h2>
    </hgroup>
    <article class="centered flexbox vleft auto-fadein">
      <q>
Tell it your regions<br>
And give it a TPL.<br>
See it in Panels.
      </q>
    </article>
  </slide>

  <slide>
    <hgroup>
      <h2>A Layout TPL</h2>
    </hgroup>
    <article>
      <iframe class="full-frame" src="http://drupalcode.org/project/panels.git/blob/6662e3b87186e42b677030eae63702fdb8061531:/plugins/layouts/twocol/panels-twocol.tpl.php">
      </iframe>

      <footer class="source">Full version at: <a href="http://drupalcode.org/project/panels.git/blob/6662e3b87186e42b677030eae63702fdb8061531:/plugins/layouts/twocol/panels-twocol.tpl.php">panels/plugins/layouts/twocol/panels-twocol.tpl.php</a></footer>
    </article>
  </slide>

  <slide>
    <hgroup>
      <h2>Content type plugins</h2>
      <h3>No, the other kind of "content type"</h3>
    </hgroup>
    <article>
      <img src="images/panels/content-type-browser.png" alt="content type" title="content type" />
    </article>
  </slide>

  <slide class="haiku brandng-background-discover">
      <hgroup>
      <h2>Content type plugins</h2>
    </hgroup>
    <article class="centered flexbox vleft auto-fadein">
      <q>
        Returns some markup,<br/>
        Wrapped in a standard object.<br/>
        Sorry for the name.
      </q>
    </article>
  </slide>

  <slide>
    <hgroup>
      <h2>Content type plugins</h2>
      <h3>No, the other kind of "content type"</h3>
    </hgroup>
    <article>
      <pre class="prettyprint" data-lang="php">
function _simplified_ctools_node_content_type_render($subtype, $conf, $panel_args) {
  $nid = $conf['nid'];
  $node = node_load($nid);

  $block = new stdClass();
  $block->delta = $node->nid;
  $block->title = check_plain($node->title);
  $block->content = node_view($node, $conf['build_mode']);

  return $block;
}
      </pre>
      <footer class="source">Real version at: <a href="http://drupalcode.org/project/ctools.git/blob/9d092ccef990c50b19391a3170eca75e1424737e:/plugins/content_types/node/node.inc#l36">plugins/content_types/node/node.inc</a></footer>
    </article>
  </slide>

  <slide class="haiku branding-background-robots">
      <hgroup>
      <h2>A repeated haiku</h2>
    </hgroup>
    <article class="centered flexbox vleft auto-fadein">
      <q>
        The plugin exists<br/>
        to implement one function.<br/>
        Debug in there first.
      </q>
    </article>
  </slide>

  <slide>
    <hgroup>
      <h2>Where to begin debugging?</h2>
      <h3>Remember, we're just concatenating strings</h3>
    </hgroup>
    <article>
      <pre class="prettyprint" data-lang="php">
<b>ctools_node_content_type_render($subtype, $conf, $panel_args);</b>
ctools_node_content_type_edit_form($form, &$form_state);
ctools_node_content_type_edit_form_validate(&$form, &$form_state);
ctools_node_content_type_edit_form_submit($form, &$form_state);
ctools_node_content_type_admin_title($subtype, $conf);
ctools_node_content_type_admin_info($subtype, $conf);
      </pre>
      <footer class="source">Real version at: <a href="http://drupalcode.org/project/ctools.git/blob/9d092ccef990c50b19391a3170eca75e1424737e:/plugins/content_types/node/node.inc#l36">plugins/content_types/node/node.inc</a></footer>
    </article>
  </slide>

  <slide>
    <hgroup>
      <h2>One more content type example</h2>
      <h3>Views Content Panes</h3>
    </hgroup>
    <article>
      <div>
      <img src="images/views-content-panes/views-content-panes--views.png" alt="Views Admin Screen" title="Views Admin Screen" />
      </div>
    </article>
  </slide>

  <slide>
    <hgroup>
      <h2>Where does the argument come from?</h2>
    </hgroup>
    <article>
      <div>
      <img src="images/views-content-panes/views-content-panes--data-source.png" alt="Views Display Checkboxes" title="Views Display Checkboxes" />
      </div>
    </article>
  </slide>

  <slide>
    <hgroup>
      <h2>Only check boxes you know you need</h2>
    </hgroup>
    <article>
      <div>
      <img src="images/views-content-panes/views-content-panes--display-checkboxes.png" alt="Views Display Checkboxes" title="Views Display Checkboxes" />
      </div>
    </article>
  </slide>

  <slide>
    <hgroup>
      <h2>On the Panels side</h2>
    </hgroup>
    <article>
      <div>
      <img src="images/views-content-panes/views-content-panes--panels-side.png" alt="Views Content Pane edit form" title="Views Content Pane edit form" />
      </div>
    </article>
  </slide>

  <slide>
    <hgroup>
      <h2>Go straight to the big render function</h2>
    </hgroup>
    <article>
      <iframe class="full-frame" src="http://drupalcode.org/project/ctools.git/blob/9d092ccef990c50b19391a3170eca75e1424737e:/views_content/plugins/content_types/views_panes.inc#l198">
      </iframe>
      <footer class="source"><a href="http://drupalcode.org/project/ctools.git/blob/9d092ccef990c50b19391a3170eca75e1424737e:/views_content/plugins/content_types/views_panes.inc#l198">views_content/plugins/content_types/views_panes.inc</a></footer>
    </article>
  </slide>

  <slide class="haiku branding-background-robots">
      <hgroup>
      <h2>One more time</h2>
    </hgroup>
    <article class="centered flexbox vleft auto-fadein">
      <q>
        The plugin exists<br/>
        to implement one function.<br/>
        Debug in there first.
      </q>
    </article>
  </slide>

  <slide class="haiku">
    <hgroup>
      <h2>Writing your own plugins</h2>
    </hgroup>
    <article class="centered flexbox vleft auto-fadein">
      <q>
      Write a new plugin <br>
      for behavior that's unique. <br>
      Copy old structure.
      </q>
    </article>
  </slide>

  <slide>
    <hgroup>
      <h2>Writing your own plugins</h2>
    </hgroup>
    <article>
      <ul>
        <li>Drush: <a href="http://drupal.org/project/plugin_stub">http://drupal.org/project/plugin_stub</a></li>
        <li>Copy/paste/edit</li>
        <li>Write from scratch</li>
        <li>Include the module hook</li>
        </ul>
      <pre class="prettyprint" data-lang="php">
function ctools_access_ruleset_ctools_plugin_directory($module, $plugin) {
  // Most of this module is implemented as an export ui plugin, and the
  // rest is in ctools/includes/ctools_access_ruleset.inc
  if ($module == 'ctools' && ($plugin == 'export_ui' || $plugin == 'access')) {
    return 'plugins/' . $plugin;
  }
}</pre>
      <footer class="source"><a href="http://drupalcode.org/project/ctools.git/blob/refs/heads/7.x-1.x:/ctools_access_ruleset/ctools_access_ruleset.module">http://drupalcode.org/project/ctools.git/blob/refs/heads/7.x-1.x:/ctools_access_ruleset/ctools_access_ruleset.module</a></footer>
    </article>
  </slide>

  <slide>
    <hgroup>
      <h2>BTW, the example module is great.</h2>
      <h3>And you already have it. It's in CTools.</h3>
    </hgroup>
    <article>
      <img src="images/panels/ctools_plugin_examples.png" alt="ctools plugin example in netbeans" title="ctools plugin example in netbeans" />
    </article>
  </slide>

  <slide class="haiku">
    <hgroup>
      <h2>Child plugins</h2>
    </hgroup>
    <article class="centered flexbox vleft auto-fadein">
      <q>
        One plugin becomes<br>
        More plugins through a “foreach.”<br>
        Fewer files needed.
    </article>
  </slide>

  <slide>
    <hgroup>
      <h2>An example of child plugins</h2>
      <h3>An Access for whether a given entity is of the right bundle</h3>
    </hgroup>
    <article>
      <iframe class="full-frame" src="http://drupalcode.org/project/ctools.git/blob/refs/heads/7.x-1.x:/plugins/access/entity_bundle.inc#l30">
      </iframe>
      <footer class="source"><a href="http://drupalcode.org/project/ctools.git/blob/refs/heads/7.x-1.x:/plugins/access/entity_bundle.inc#l30">plugins/access/entity_bundle.inc</a></footer>
    </article>
  </slide>

  <slide class="haiku">
    <hgroup>
      <h2>hook_ctools_plugin_post_alter()</h2>
    </hgroup>
    <article class="centered flexbox vleft auto-fadein">
      <q>
      Because it's Drupal, <br>
      you can alter a plugin. <br>
      Do at your own risk. </q>
    </article>
  </slide>

  <slide>
    <hgroup>
      <h2>Altering plugins</h2>
      <h3>When you want a plugin to use a different function</h3>
    </hgroup>
    <article>
      <pre class="prettyprint" data-lang="php">
$plugin = array(
  'title' => t('Simplecontext content type'),
  'content_types' => 'simplecontext_content_type',
  // Name of a function which will render the block.
  'render callback' => 'simplecontext_content_type_render',
  // Icon goes in the directory with the content type.
  'icon' => 'icon_example.png',
  'description' => t('Simplecontext content type - works with a simplecontext context.'),
  'required context' => new ctools_context_required(t('Simplecontext'), 'simplecontext'),
  'edit form' => 'simplecontext_content_type_edit_form',
  'admin title' => 'ctools_plugin_example_simplecontext_content_type_admin_title',
  'admin info' => 'ctools_plugin_example_simplecontext_content_type_admin_info',
  'category' => array(t('CTools Examples'), -9),
);</pre>
<footer class="source">Real version at: <a href="http://drupalcode.org/project/ctools.git/blob_plain/refs/heads/7.x-1.x:/ctools_plugin_example/plugins/content_types/simplecontext_content_type.inc">ctools_plugin_example/plugins/content_types/simplecontext_content_type.inc</a></footer>
    </article>
  </slide>

  <slide>
    <hgroup>
      <h2>Altering plugins</h2>
      <h3>Organic Groups Fieldable Panels Panes</h3>
    </hgroup>
    <article>
      <iframe class="full-frame" src="http://drupalcode.org/project/og_fpp.git/blob/d5d754a99d5f1b2a5254595fb1c0e194a305dd84:/og_fpp.module#l9">
      </iframe>
      <footer class="source"><a href="http://drupalcode.org/project/og_fpp.git/blob/d5d754a99d5f1b2a5254595fb1c0e194a305dd84:/og_fpp.module#l9">og_fpp.module</a></footer>
    </article>
  </slide>

  <slide class="haiku">
    <hgroup>
      <h2>Entity Reference</h2>
    </hgroup>
    <article class="centered flexbox vleft auto-fadein">
      <q>
        Even field module<br/>
        Has plugins extending it.<br/>
        Beats huge form alters.
      </q>
    </article>
  </slide>

  <slide>
    <hgroup>
      <h2>Normal field module</h2>
    </hgroup>
    <article>
      <iframe class="full-frame" src="http://drupalcode.org/project/drupal.git/blob/39be69046740a68ea73d1a7f27dd2f7aa4c66727:/modules/field/modules/number/number.module">
      </iframe>
      <footer class="source"><a href="http://drupalcode.org/project/drupal.git/blob/39be69046740a68ea73d1a7f27dd2f7aa4c66727:/modules/field/modules/number/number.module">modules/field/modules/number/number.module
</a></footer>
    </article>
  </slide>

  <slide>
    <hgroup>
      <h2>Altering entity reference widget forms</h2>
      <h3>How a plugin approach helps?</h3>
    </hgroup>
    <article>
      <img src="images/coupon_screen.png" class="reflect" alt="Entity Reference with coupons" title="Entity reference widget with coupons">
    </article>
  </slide>

  <slide>
    <hgroup>
      <h2>Entity Reference widget plugin selection</h2>
    </hgroup>
    <article>
      <img src="images/entity_reference_coupon.jpg" class="reflect" alt="Entity Reference with coupons" title="Entity reference widget with coupons">
    </article>
  </slide>

  <slide>
    <hgroup>
      <h2>Entity Reference widget plugin selection</h2>
    </hgroup>
    <article>
      <pre class="prettyprint" data-lang="php">
class EntityReference_SelectionHandler_Generic_commerce_coupon
  extends EntityReference_SelectionHandler_Generic {
  public function buildEntityFieldQuery($match = NULL, $match_operator = 'CONTAINS') {
    $query = parent::buildEntityFieldQuery($match, $match_operator);
    if (isset($match)) {
      <b>$query->fieldCondition('commerce_coupon_code', 'value',
        $match, $match_operator)</b>;
    }
    return $query;
  }
  public function getLabel($entity) {
    $wrapper = entity_metadata_wrapper('commerce_coupon', $entity);
    <b>return $wrapper->commerce_coupon_code->value()</b>;
  }
      </pre>
    <footer class="source">Example from <a href="http://drupal.org/project/commerce_coupon">Commerce coupon</a>. Other example: <a href="http://drupal.org/project/webform_entity">Webform entity module</a>.</footer>
    </article>
  </slide>

  <slide class="haiku">
    <hgroup>
      <h2>Export UI</h2>
    </hgroup>
    <article class="centered flexbox vleft auto-fadein">
      <q>
        Export ui is<br>
        Not about exporting things.<br>
        It's for loading things.
      </q>
    </article>
  </slide>

  <slide>
    <hgroup>
      <h2>Mini Panels as a "content type"</h2>
    </hgroup>
    <article>
      <img src="images/panels/mini-panels-content-types.png" alt="Mini Panels" title="Mini Panels" />
    </article>
  </slide>

<!--
  <slide>
    <hgroup>
      <h2>Normal field module</h2>
    </hgroup>
    <article>
      <iframe class="full-frame" src="http://drupalcode.org/project/drupal.git/blob/39be69046740a68ea73d1a7f27dd2f7aa4c66727:/modules/field/modules/number/number.module">
      </iframe>
      <footer class="source"><a href="http://drupalcode.org/project/drupal.git/blob/39be69046740a68ea73d1a7f27dd2f7aa4c66727:/modules/field/modules/number/number.module">modules/field/modules/number/number.module
</a></footer>
    </article>
  </slide>
-->
  <slide>
    <hgroup>
      <h2>Mini Panels and Export UI</h2>
    </hgroup>
    <article>
      <img src="images/panels/mini-panels-export-ui.png" alt="Mini Panels" title="Mini Panels" />
    </article>
  </slide>


  <slide>
    <hgroup>
      <h2>One module, two plugin types</h2>
    </hgroup>
    <article>
      <img src="images/panels/panels-mini-directory.png" alt="Mini Panels" title="Mini Panels" />
    </article>
  </slide>

  <slide>
    <hgroup>
      <h2>What's the point?</h2>
    </hgroup>
    <article>
      <img src="images/panels/panels_mini_table.png" alt="Panels Mini table" title="Panels Mini table" />
      <br>
      <img src="images/panels/panels-mini-features.png" alt="Panels Mini Features" title="Panels Mini Features" />
    </article>
  </slide>













  <slide>
    <hgroup>
      <h2>Wait, there is more!</h2>
      <h3>Other modules providing plugins support</h3>
    </hgroup>
    <article>
      <ul class="build">
        <li><a href="http://drupal.org/project/views">Views</a></li>
        <li><a href="http://drupal.org/project/addressfield">Addressfield</a></li>
        <li><a href="http://drupal.org/project/crumbs">Crumbs</a></li>
        <li><a href="http://drupal.org/project/feeds">Feeds</a></li>
        <li><a href="http://drupal.org/project/facetapi_pretty_paths">Facet API pretty paths</a></li>
        <li><a href="http://drupal.org/project/linkit">Linkit</a></li>
        <li><a href="http://drupal.org/project/quicktabs">Quicktabs</a></li>
        <li><a href="http://drupal.org/project/tree">Tree</a></li>
        <li><a href="http://drupal.org/project/views_bulk_operations">Views Bulk Operations</a></li>
      </ul>
    </article>
  </slide>

  <slide>
    <hgroup>
      <h2>One more plug</h2>
      <h3>D8 Plugin System Deep Dive session</h3>
    </hgroup>
    <article>
      <p>
        <a href="http://portland2013.drupal.org/node/2458">
          From Drupalcon Portland 2013
        </a><br>
      </p>
      <iframe width="420" height="315" src="http://www.youtube.com/embed/T5y3dJYHb_A" frameborder="0" allowfullscreen></iframe>
    </article>
  </slide>

  <slide class="haiku">
    <hgroup>
      <h2>Questions</h2>
    </hgroup>
    <article class="centered flexbox vleft auto-fadein">
      <q>
        Now's your chance to ask <br/>
        me any plugin question. <br/>
        Please pose as haikus.
      </q>
    </article>
  </slide>

  <slide class="thank-you-slide segue nobackground">
    <aside class="gdbar right"><img src="images/palantir-branding/palantir_logo.png"></aside>
    <article class="flexbox vleft auto-fadein">
      <h2>Thanks!</h2>
      <h3>More info at:</h3>
      <ul>
        <li><a href="http://drupal.org/project/ctools">CTools module: http://drupal.org/project/ctools</a></li>
        <li><a href="http://drupalcode.org/project/ctools.git/tree/refs/heads/7.x-1.x:/ctools_plugin_example">Ctools plugin example (inside CTools)</a></li>
        <li><a href="http://portland2013.drupal.org/node/2458">Drupal 8 plugin presentation in Portland</a></li>
      </ul>
    </article>
    <p>Steve Persch<br>
    Senior Engineer, Palantir.net</p>

    <!-- @todo
   <p class="auto-fadein" data-config-contact>
     populated from slide_config.json
    </p>
    -->
  </slide>
  <slide class="backdrop"></slide>
</slides>

<script>
var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-XXXXXXXX-1']);
_gaq.push(['_trackPageview']);

(function() {
  var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
  ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
  var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})();
</script>

<!--[if IE]>
  <script src="http://ajax.googleapis.com/ajax/libs/chrome-frame/1/CFInstall.min.js"></script>
  <script>CFInstall.check({mode: 'overlay'});</script>
<![endif]-->
</body>
</html>
